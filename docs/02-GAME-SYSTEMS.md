# 소드마스터 - 게임 시스템

## 🎴 카드 시스템

### 카드 종류

1. **검 카드 (SwordCard)** - 빨간색 테두리
   - 장착하면 플레이어의 무기가 됨
   - 스킬 사용 시 검의 스탯이 적용됨
   - 내구도가 0이 되면 **영구 파괴** (덱에서 삭제)
   - 새 검 장착 시 기존 검은 무덤으로 (내구도 유지)

2. **스킬 카드 (SkillCard)** - 초록색 테두리
   - 검을 사용하여 공격/방어/버프
   - 사용 후 무덤으로 → 덱 비면 셔플해서 재사용
   - 무한 재사용 가능

### 덱 & 손패 규칙

| 항목 | 값 |
|------|-----|
| 덱 크기 | 20장 |
| 첫 드로우 | 5장 |
| 턴당 드로우 | 2장 |
| 최대 손패 | 10장 (초과 시 앞에서 버림) |
| **전투 종료 시** | 모든 카드 덱으로 → 셔플 |

### 카드 교환 시스템

- **X키** 또는 교환 버튼 → 교환 모드
- 카드 클릭 → 무덤으로 + 새 카드 1장 드로우
- **ESC** 취소

### 마나 시스템

- 기본 마나: **5**
- 카드마다 마나 비용 있음
- 턴 종료 시 마나 전부 회복

---

## ⚔️ 전투 시스템 (크로노아크 스타일)

### 적 대기턴 시스템

적의 각 행동에는 **대기턴(delay)**이 있음:
- 플레이어가 **카드 1장 사용** → 모든 적 대기턴 -1
- 대기턴이 **0 이하** → 적 즉시 행동
- 남은 행동이 있으면 계속 발동

### 타겟 선택 시스템

- 적이 **2명 이상**일 때 공격 스킬 사용 → 타겟 선택 모드
- 적 위에 👆 표시, 원하는 적 클릭해서 공격
- 검 카드, 버프, 방어 스킬은 바로 사용
- **ESC** 취소

### 턴 흐름

```
[플레이어 턴]
  ↓
  카드 사용 → 적 대기턴 -1 → 대기턴 0이면 적 행동
  ↓
  (반복)
  ↓
  턴 종료 (SPACE) → 적 남은 행동 전부 발동
  ↓
[다음 턴 시작]
  마나 회복 + 2장 드로우 + 적 대기턴 리셋
```

### 전투 종료

- 모든 적 처치 시 **자동 종료** (턴 종료 안 눌러도 됨)
- 손패 + 무덤 → 덱으로 합쳐서 셔플
- 다음 전투 시 새로 5장 드로우

### 대기 행동 (W키)

- 턴당 **1번만** 사용 가능
- 적 대기턴을 -1 하지만 마나 소모 없음

---

## 🛡️ 방어율 시스템

### 기본 방어율

- **검 방어력 = 방어율%** (심플!)
- 예: 방어력 10인 검 → **10% 확률**로 적 공격 방어

### 방어 성공 시

1. 🛡️ 이펙트 + 메시지
2. 데미지 0
3. **검 내구도 1 소모**

### 카운트 방어 스킬

방어 스킬 중 일부는 **카운트(대기 시간)** 기반으로 작동합니다.

#### 패리 (🛡️)
- **1대기** 동안 유지
- 방어율 **x5** 적용
- 방어 **성공 시** 반격 발동
  - 반격 데미지 = 검 공격력 × 1.0 + 적 공격의 50%
- 방어 실패 시 패리 효과 유지 (대기 시간 소진 시 소멸)

#### 철벽 (🏰)
- **3대기** 동안 유지
- 방어율 **x10** 적용
- 적 공격 1회 방어 시 (성공/실패 무관) 즉시 소멸

### 카운트 감소 조건

- 플레이어가 **카드 1장 사용**할 때
- 플레이어가 **대기 버튼(W)**을 누를 때

### 기존 방어 스킬

- 반격 스킬: 방어율 x5 + 방어 성공 시 반격 데미지

---

## 🗡️ 검 (무기) 스탯

| 스탯 | 설명 |
|------|------|
| `attack` | 기본 공격력 |
| `attackCount` | 기본 공격 횟수 |
| `reach` | 공격 범위 (single/double/triple/all) |
| `defense` | **방어율%** (10이면 10%) |
| `durability` | 내구도 (0이 되면 파괴) |
| `manaCost` | 장착 시 마나 소모 |

### 범위 (Reach)

- `single` (①): 가장 가까운 적 1명
- `double` (②): 앞 2명
- `triple` (③): 앞 3명
- `all` (∞): 전체 적

---

## 💫 스킬 스탯

| 스탯 | 설명 |
|------|------|
| `attackMultiplier` | 공격력 배수 (x0.5, x1.0, x2.0 등) |
| `attackCount` | 추가 타수 |
| `reach` | 공격 범위 |
| `defenseBonus` | 방어 스킬용 (흘리기 등) |
| `durabilityCost` | 내구도 소모량 |
| `manaCost` | 마나 소모 |

---

## 📈 성장 시스템

### 경험치 & 레벨업
- 적 처치 시 경험치 획득 (적 최대 HP / 2)
- 레벨업 시 HP +10 증가
- 레벨업 시 "균열 무기 감응" 패시브 자동 레벨업

### 패시브 스킬
- **균열 무기 감응**: 전투 시작 시 랜덤 유니크 무기 획득 확률
  - 레벨당 5%씩 증가 (최대 Lv.5 = 25%)

---

## 🔮 인첸트 시스템

### 접두사 (Prefix)

| 접두사 | 효과 |
|--------|------|
| **녹슨** | 내구도 1로 고정 ⚠️ |
| 부서진 | 공격력 -5 |
| 날카로운 | 공격력 +3 |
| 신속한 | 공격횟수 +1 |
| 견고한 | 내구도 +2 |

### 접미사 (Suffix)

| 접미사 | 효과 |
|--------|------|
| 피의 | 흡혈 10% |
| 상처의 | 출혈 데미지 |

---

## 👹 적 시스템

### 웨이브 시스템

- 웨이브 1~2: 산적, 궁수 (쉬움)
- 웨이브 3~5: 검객, 창병 추가
- 웨이브 6~9: 낭인, 기사, 자객, 주술사
- 웨이브 5, 10...: **보스** (검귀, 용전사)

---

## 📊 데미지 계산

```
기본 데미지 = 검_공격력 × 스킬_배수
실제 데미지 = (기본 데미지 - 적_방어력) × 타수

총 타수 = 검_타수 + 스킬_추가타수
```

### 관통 (Pierce) 적용 시

```
실제 데미지 = 기본 데미지 - (적_방어력 × (1 - 관통비율))
```

예: 관통 0.5 (50%) → 적 방어력의 50%만 적용
