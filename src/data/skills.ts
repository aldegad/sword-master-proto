import type { SkillCard } from '../types';

// Ïä§ÌÇ¨ Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ (ÎßàÎÇò 0~3 Î≤îÏúÑÎ°ú Î∞∏Îü∞Ïä§ Ï°∞Ï†ï)
export const SKILLS: Record<string, SkillCard> = {
  // ===== Í∏∞Î≥∏ Í≥µÍ≤©Í∏∞ =====
  slash: {
    id: 'slash',
    name: 'Î≤†Í∏∞',
    emoji: '‚öîÔ∏è',
    type: 'attack',
    attackMultiplier: 1.0,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 1,
    description: 'Í∏∞Î≥∏ Î≤†Í∏∞ Í≥µÍ≤©.',
  },
  thrust: {
    id: 'thrust',
    name: 'Ï∞åÎ•¥Í∏∞',
    emoji: 'üó°Ô∏è',
    type: 'attack',
    attackMultiplier: 1.2,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 1,
    description: 'Í¥ÄÌÜµÎ†• ÏûàÎäî Ï∞åÎ•¥Í∏∞. Î∞©Ïñ¥ 30% Î¨¥Ïãú.',
    effect: { type: 'pierce', value: 0.3 },
  },

  // ===== Ïó∞ÏÜçÍ∏∞ (1~2) =====
  doubleSlash: {
    id: 'doubleSlash',
    name: 'Ïù¥Ïó∞Í≤©',
    emoji: '‚ö°',
    type: 'attack',
    attackMultiplier: 0.7,
    attackCount: 2,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 1,
    description: 'Îπ†Î•∏ Îëê Î≤à Î≤†Í∏∞. x0.7 x2ÌÉÄ.',
  },
  tripleThrust: {
    id: 'tripleThrust',
    name: 'ÏÇºÏó∞Ïûê',
    emoji: 'üí®',
    type: 'attack',
    attackMultiplier: 0.5,
    attackCount: 3,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 1,
    description: 'ÏÑ∏ Î≤à Ïó∞ÏÜç Ï∞åÎ•¥Í∏∞. x0.5 x3ÌÉÄ.',
  },
  flurry: {
    id: 'flurry',
    name: 'ÎÇúÎ¨¥',
    emoji: 'üå™Ô∏è',
    type: 'attack',
    attackMultiplier: 0.3,
    attackCount: 5,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 2,
    manaCost: 2,
    description: 'Ï†ïÏã†ÏóÜÏù¥ ÌúòÎëêÎ•¥Í∏∞. x0.3 x5ÌÉÄ!',
  },

  // ===== Î≤îÏúÑ Í≥µÍ≤©Í∏∞ (1~3) =====
  sweepingBlow: {
    id: 'sweepingBlow',
    name: 'Ìö°Î≤†Í∏∞',
    emoji: '‚ÜîÔ∏è',
    type: 'attack',
    attackMultiplier: 0.8,
    attackCount: 1,
    reach: 'double',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 1,
    description: 'ÏòÜÏúºÎ°ú ÌÅ¨Í≤å ÌúòÎëòÎü¨ 2Ï†Å Í≥µÍ≤©.',
  },
  whirlwind: {
    id: 'whirlwind',
    name: 'ÌöåÏ†ÑÏ∞∏',
    emoji: 'üåÄ',
    type: 'attack',
    attackMultiplier: 0.6,
    attackCount: 1,
    reach: 'all',
    defenseBonus: 0,
    durabilityCost: 2,
    manaCost: 3,
    description: 'ÌöåÏ†ÑÌïòÎ©∞ Î™®Îì† Ï†ÅÏùÑ Í≥µÍ≤©!',
  },
  crescent: {
    id: 'crescent',
    name: 'ÏõîÏïÑÏ∞∏',
    emoji: 'üåô',
    type: 'attack',
    attackMultiplier: 1.0,
    attackCount: 1,
    reach: 'triple',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 2,
    description: 'Ï¥àÏäπÎã¨ Í∂§Ï†ÅÏúºÎ°ú 3Ï†Å Î≤†Í∏∞.',
  },

  // ===== Í∞ïÌÉÄÍ∏∞ (Ïπ¥Ïö¥Ìä∏ Í∏∞Î∞ò) =====
  powerStrike: {
    id: 'powerStrike',
    name: 'Í∞ïÌÉÄ',
    emoji: 'üí•',
    type: 'attack',
    attackMultiplier: 2.0,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 2,
    description: '1ÎåÄÍ∏∞ ÌõÑ Í∞ïÎ†•Ìïú ÏùºÍ≤©! x2.0 Îç∞ÎØ∏ÏßÄ.',
    effect: { type: 'chargeAttack', value: 2.0, duration: 1 },  // value: Í≥µÍ≤©Î∞∞Ïàò, duration: ÎåÄÍ∏∞
  },
  heavenSplitter: {
    id: 'heavenSplitter',
    name: 'Ï≤úÏßÄÍ∞úÎ≤Ω',
    emoji: '‚ö°',
    type: 'attack',
    attackMultiplier: 3.5,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 2,
    manaCost: 3,
    description: 'Í∂ÅÍ∑πÏùò ÏùºÍ≤©! x3.5 + Ïä§ÌÑ¥.',
    effect: { type: 'stun', value: 1, duration: 1 },
  },

  // ===== ÌäπÏàò Í≥µÍ≤©Í∏∞ (1~2) =====
  bleedingEdge: {
    id: 'bleedingEdge',
    name: 'Ï∂úÌòàÍ≤Ä',
    emoji: 'ü©∏',
    type: 'attack',
    attackMultiplier: 0.8,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 1,
    description: 'ÍπäÏùÄ ÏÉÅÏ≤òÎ°ú Ï∂úÌòà Ïú†Î∞ú. 3ÌÑ¥Í∞Ñ 3ÌîºÌï¥.',
    effect: { type: 'bleed', value: 3, duration: 3 },
  },
  vampireSlash: {
    id: 'vampireSlash',
    name: 'Ìù°ÌòàÏ∞∏',
    emoji: 'üßõ',
    type: 'attack',
    attackMultiplier: 0.9,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 2,
    description: 'ÌîºÌï¥Ïùò 30%Î•º HPÎ°ú Ìù°Ïàò!',
    effect: { type: 'lifesteal', value: 0.3 },
  },
  armorBreaker: {
    id: 'armorBreaker',
    name: 'ÌååÍ∞ëÏà†',
    emoji: 'üî®',
    type: 'attack',
    attackMultiplier: 1.5,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 1,
    description: 'Î∞©Ïñ¥ ÏôÑÏ†Ñ Î¨¥Ïãú! x1.5 Í¥ÄÌÜµ.',
    effect: { type: 'pierce', value: 1.0 },
  },
  
  // ===== Ïã†ÏÜç Í≥µÍ≤© (Ï†Å ÎåÄÍ∏∞ÌÑ¥ Í∞êÏÜå ÏóÜÏùå) =====
  quickSlash: {
    id: 'quickSlash',
    name: 'ÏÜçÍ≥µ',
    emoji: 'üí®',
    type: 'attack',
    attackMultiplier: 0.6,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 1,
    description: 'Ïã†ÏÜç Í≥µÍ≤©! Ï†Å ÎåÄÍ∏∞ÌÑ¥ÏùÑ Ï§ÑÏù¥ÏßÄ ÏïäÏùå.',
    isSwift: true,
  },
  flashStrike: {
    id: 'flashStrike',
    name: 'ÏÑ¨Í¥ëÏ∞∏',
    emoji: '‚ö°',
    type: 'attack',
    attackMultiplier: 0.8,
    attackCount: 2,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 1,
    description: 'Ïã†ÏÜç 2Ïó∞ÌÉÄ! Ï†Å ÎåÄÍ∏∞ÌÑ¥ÏùÑ Ï§ÑÏù¥ÏßÄ ÏïäÏùå.',
    isSwift: true,
  },
  
  // ===== ÎèÑÎ∞ú Ïä§ÌÇ¨ =====
  taunt: {
    id: 'taunt',
    name: 'Ï°∞Î°±',
    emoji: 'üò§',
    type: 'buff',
    attackMultiplier: 0,
    attackCount: 0,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 0,
    manaCost: 1,
    description: 'Ï†ÅÏùÑ ÎèÑÎ∞ú! Ï†Å ÎåÄÍ∏∞ÌÑ¥ -1, Ïπ¥Îìú 1Ïû• ÎìúÎ°úÏö∞.',
    effect: { type: 'taunt', value: 1 },
  },

  // ===== Î∞©Ïñ¥Í∏∞ (Ïπ¥Ïö¥Ìä∏ Í∏∞Î∞ò) =====
  parry: {
    id: 'parry',
    name: 'Ìå®Î¶¨',
    emoji: 'üõ°Ô∏è',
    type: 'defense',
    attackMultiplier: 1.0,  // Î∞òÍ≤© Î∞∞Ïàò
    attackCount: 0,
    reach: 'single',
    defenseBonus: 1,
    durabilityCost: 1,
    manaCost: 1,
    description: '1ÎåÄÍ∏∞ ÎèôÏïà Î∞©Ïñ¥Ïú® x5. Î∞©Ïñ¥ ÏÑ±Í≥µ Ïãú Î∞òÍ≤©!',
    effect: { type: 'parry', value: 5, duration: 1 },  // value: Î∞©Ïñ¥Ïú® Î∞∞Ïàò, duration: ÎåÄÍ∏∞ ÏãúÍ∞Ñ
  },
  ironWall: {
    id: 'ironWall',
    name: 'Ï≤†Î≤Ω',
    emoji: 'üè∞',
    type: 'defense',
    attackMultiplier: 0,
    attackCount: 0,
    reach: 'single',
    defenseBonus: 1,
    durabilityCost: 0,
    manaCost: 1,
    description: '3ÎåÄÍ∏∞ ÎèôÏïà Î∞©Ïñ¥Ïú® x10. 1Ìöå Î∞©Ïñ¥ ÌõÑ ÏÜåÎ©∏.',
    effect: { type: 'ironWall', value: 10, duration: 3 },  // value: Î∞©Ïñ¥Ïú® Î∞∞Ïàò, duration: ÎåÄÍ∏∞ ÏãúÍ∞Ñ
  },
  counter: {
    id: 'counter',
    name: 'Î∞òÍ≤©',
    emoji: '‚Ü©Ô∏è',
    type: 'defense',
    attackMultiplier: 1.5,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 1,
    durabilityCost: 1,
    manaCost: 1,
    description: 'Í≥µÍ≤©ÏùÑ Î∞õÏïÑÎÇ¥Í≥† Î∞©Ïñ¥Ïú® x5 + Î∞òÍ≤©!',
    effect: { type: 'counter', value: 1.5 },
  },

  // ===== Î≤ÑÌîÑÍ∏∞ (Ïã†ÏÜç - Ï†Å ÎåÄÍ∏∞ÌÑ¥ Í∞êÏÜå ÏóÜÏùå) =====
  focus: {
    id: 'focus',
    name: 'ÏßëÏ§ë',
    emoji: 'üéØ',
    type: 'buff',
    attackMultiplier: 0,
    attackCount: 0,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 0,
    manaCost: 0,
    description: 'Îã§Ïùå Í≥µÍ≤©Ïùò Î∞∞Ïú® +50%!',
    isSwift: true,
  },
  sharpen: {
    id: 'sharpen',
    name: 'Ïó∞Îßà',
    emoji: '‚ú®',
    type: 'buff',
    attackMultiplier: 0,
    attackCount: 0,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 0,
    manaCost: 1,
    description: '3ÌÑ¥Í∞Ñ Í∏∞Î≥∏ Í≥µÍ≤©Î†• +5.',
    isSwift: true,
  },
  
  // ===== ÌäπÏàò Ïä§ÌÇ¨ (Ïã†ÏÜç) =====
  bladeDance: {
    id: 'bladeDance',
    name: 'Í≤ÄÏùò Ï∂§',
    emoji: 'üíÉ',
    type: 'special',
    attackMultiplier: 0,
    attackCount: 0,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 0,
    manaCost: 3,
    description: 'Ïπ¥Îìú 3Ïû• ÎìúÎ°úÏö∞! ÎìúÎ°úÏö∞Ìïú Î™®Îì† Ïπ¥Îìú Ï¶âÏãú Î∞úÎèô!',
    effect: { type: 'bladeDance', value: 3 },
    isSwift: true,
  },
  sheathe: {
    id: 'sheathe',
    name: 'ÎÇ©ÎèÑ',
    emoji: '‚öîÔ∏è',
    type: 'buff',
    attackMultiplier: 0,
    attackCount: 0,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 0,
    manaCost: 0,
    description: 'ÌòÑÏû¨ Î¨¥Í∏∞Ïùò Î∞úÎèÑ Ïä§ÌÇ¨ Ïû¨ÏãúÏ†Ñ!',
    effect: { type: 'sheathe', value: 1 },
    isSwift: true,
  },
  
  // ===== ÎìúÎ°úÏö∞/ÏÑúÏπò Ïä§ÌÇ¨ (Ïã†ÏÜç) =====
  bladeSeeker: {
    id: 'bladeSeeker',
    name: 'Í≤ÄÏùò Î∂ÄÎ¶Ñ',
    emoji: 'üîç',
    type: 'buff',
    attackMultiplier: 0,
    attackCount: 0,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 0,
    manaCost: 2,
    description: 'Îç±ÏóêÏÑú Í≤Ä 3ÏûêÎ£®Î•º ÌôïÏù∏ÌïòÍ≥† 1Í∞ú ÏÑ†ÌÉù!',
    effect: { type: 'searchSword', value: 3 },
    isSwift: true,
  },
  soulRecall: {
    id: 'soulRecall',
    name: 'ÌòºÎ∞±Í∑ÄÌôò',
    emoji: 'üëª',
    type: 'buff',
    attackMultiplier: 0,
    attackCount: 0,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 0,
    manaCost: 2,
    description: 'Î¨¥Îç§ÏóêÏÑú Ïπ¥Îìú 3Ïû•ÏùÑ ÌôïÏù∏ÌïòÍ≥† 1Í∞ú ÌöåÏàò!',
    effect: { type: 'graveRecall', value: 3 },
    isSwift: true,
  },
  ancestorBlade: {
    id: 'ancestorBlade',
    name: 'ÏÑ†Ï°∞Ïùò Í≤Ä',
    emoji: '‚ö∞Ô∏è',
    type: 'buff',
    attackMultiplier: 0,
    attackCount: 0,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 0,
    manaCost: 3,
    description: 'Î¨¥Îç§Ïùò Í≤Ä Ï§ë ÌïòÎÇòÎ•º Ï¶âÏãú Ïû•Ï∞©!',
    effect: { type: 'graveEquip', value: 1 },
    isSwift: true,
  },

  // ===== ÌäπÏàòÍ∏∞ (Í∞ïÌïú Ïä§ÌÇ¨: 2~3) =====
  chargeSlash: {
    id: 'chargeSlash',
    name: 'ÎèåÍ≤©Ï∞∏',
    emoji: 'üèÉ',
    type: 'special',
    attackMultiplier: 2.0,
    attackCount: 1,
    reach: 'triple',
    defenseBonus: 0,
    durabilityCost: 1,
    manaCost: 2,
    description: 'ÎèåÏßÑÌïòÎ©∞ 3Ï†ÅÏùÑ x2.0ÏúºÎ°ú Î≤§Îã§!',
    effect: { type: 'charge', value: 3 },
  },
  bladeStorm: {
    id: 'bladeStorm',
    name: 'Í≤ÄÍ∏∞Ìè≠Ìíç',
    emoji: 'üå™Ô∏è',
    type: 'special',
    attackMultiplier: 0.8,
    attackCount: 3,
    reach: 'all',
    defenseBonus: 0,
    durabilityCost: 2,
    manaCost: 3,
    description: 'Í≤ÄÍ∏∞ Î∞©Ï∂ú! Ï†ÑÏ≤¥ x0.8 x3ÌÉÄ!',
  },
  finalJudgment: {
    id: 'finalJudgment',
    name: 'ÏµúÌõÑÏã¨Ìåê',
    emoji: 'üíÄ',
    type: 'special',
    attackMultiplier: 5.0,
    attackCount: 1,
    reach: 'single',
    defenseBonus: 0,
    durabilityCost: 3,
    manaCost: 3,
    description: 'Í∂ÅÍ∑πÍ∏∞! x5.0! Í≤ÄÏù¥ ÌååÍ¥¥Îê† Ïàò ÏûàÎã§.',
    effect: { type: 'pierce', value: 0.5 },
  },
};

// Ïä§ÌÇ¨ ÏÉùÏÑ± Ìó¨Ìçº Ìï®Ïàò
export function createSkillCard(skillId: string): SkillCard | null {
  const template = SKILLS[skillId];
  if (!template) return null;
  
  return { ...template };
}

// ÎûúÎç§ Ïä§ÌÇ¨ ÏÉùÏÑ±
export function getRandomSkill(): SkillCard {
  const skillIds = Object.keys(SKILLS);
  const randomId = skillIds[Math.floor(Math.random() * skillIds.length)];
  return createSkillCard(randomId)!;
}

// ÌÉÄÏûÖÎ≥Ñ Ïä§ÌÇ¨ ÌïÑÌÑ∞
export function getSkillsByType(type: SkillCard['type']): string[] {
  return Object.entries(SKILLS)
    .filter(([_, skill]) => skill.type === type)
    .map(([id]) => id);
}

// Í∏∞Î≥∏ Îç± Íµ¨ÏÑ± (Î¨¥Í∏∞ ÎπÑÏú® Ï¶ùÍ∞Ä)
export function getStarterDeck(): { swords: string[]; skills: string[] } {
  return {
    swords: [
      'katana', 'samjeongdo', 'longsword',  // Í∏∞Î≥∏ 3Ï¢Ö
      'wakizashi', 'yedogeom', 'armingsword',  // Ï∂îÍ∞Ä 3Ï¢Ö
    ],
    skills: [
      'slash', 'slash', 'slash',
      'thrust', 'thrust',
      'doubleSlash',
      'parry', 'parry',
      'quickSlash',
      'focus',
      'powerStrike',
    ],
  };
}
